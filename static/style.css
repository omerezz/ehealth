/* =========================================
   1. GLOBAL VARIABLES & RESET
   ========================================= */
:root {
  --bg: #eef3ff;
  --panel: #ffffff;
  --panel2: #f6f9ff;
  --stroke: rgba(17, 24, 39, .12);
  --text: #0b1220;
  --muted: #475569;

  --primary: #00bfe6;
  --primary2: #2b6cff;
  --accent: #7aa7ff;

  --success: #059669;
  --danger: #e11d48;

  --shadow: 0 18px 50px rgba(17, 24, 39, .10);
  --shadow2: 0 10px 24px rgba(17, 24, 39, .10);
}

* { box-sizing: border-box; }
html, body { height: 100%; margin: 0; padding: 0; }

body {
  font-family: "Poppins", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  color: var(--text);
  /* Global Background */
  background:
    radial-gradient(900px 520px at 15% 10%, rgba(0, 191, 230, .12), transparent 60%),
    radial-gradient(900px 520px at 85% 20%, rgba(43, 108, 255, .10), transparent 60%),
    linear-gradient(180deg, #f7faff, #edf3ff);
  background-attachment: fixed; /* Keeps bg stable during scroll */
}

.hidden { display: none !important; }

/* =========================================
   2. PAGE LAYOUT TYPES
   ========================================= */

/* Type A: Centered Pages (Index, Team, Rules) */
/* This centers content vertically and horizontally */
body.page-centered {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
}

/* Type B: Game Page */
/* This allows scrolling and top-aligned content */
body.page-game {
  display: block;
  overflow-y: auto;
  min-height: 100vh;
}

/* =========================================
   3. INDEX PAGE (SPLIT LAYOUT)
   ========================================= */
.landing-layout {
  width: min(1200px, 96vw);
  margin: 0 auto;
  padding: 40px 0;
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 60px;
  align-items: center;
}

.landing-left { padding: 20px; }

.landing-title {
  font-size: 56px;
  font-weight: 900;
  letter-spacing: .02em;
  text-transform: uppercase;
  margin: 0 0 20px 0;
  line-height: 1.1;
  color: var(--text);
}

.landing-description-box {
  background: #fff;
  border: 1px solid var(--stroke);
  border-radius: 18px;
  padding: 24px;
  box-shadow: var(--shadow2);
  margin-bottom: 32px;
}

.landing-description {
  margin: 0;
  font-weight: 500;
  line-height: 1.7;
  color: var(--muted);
  font-size: 17px;
}

/* Right Panel: Scanner */
.landing-right { display: flex; justify-content: center; }

.scanner-frame {
  width: 100%;
  max-width: 420px;
  background: #111;
  border-radius: 20px;
  padding: 12px;
  box-shadow: 0 30px 60px rgba(0,0,0,0.3);
  border: 1px solid #333;
}

.scanner-screen {
  position: relative;
  background: #000;
  border-radius: 12px;
  overflow: hidden;
  height: 550px;
  border: 1px solid #222;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* The SVG Skeleton */
.scan-svg {
  width: 80%;
  height: auto;
  opacity: 0.5;
  filter: drop-shadow(0 0 10px rgba(0, 191, 230, 0.3));
}

/* Moving Blue Line */
.scan-line {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 6px;
  background: #00bfe6;
  box-shadow: 0 0 20px #00bfe6, 0 0 40px #00bfe6;
  animation: scanMove 3.5s ease-in-out infinite;
  z-index: 10;
  opacity: 0.8;
}

@keyframes scanMove {
  0% { top: 5%; }
  50% { top: 95%; }
  100% { top: 5%; }
}

/* HUD Text */
.scan-hud {
  position: absolute;
  width: 100%;
  padding: 15px;
  color: #00bfe6;
  font-family: monospace;
  font-weight: 700;
  font-size: 12px;
  z-index: 20;
}
.hud-top { top: 0; display: flex; justify-content: space-between; }
.hud-btm { bottom: 0; text-align: center; letter-spacing: 0.1em; }
.blink { animation: blinker 1.5s linear infinite; }
@keyframes blinker { 50% { opacity: 0.3; } }


/* =========================================
   4. TEAM & RULES PAGES
   ========================================= */
.game-wrap {
  width: min(1200px, 96vw);
  margin: 0 auto;
  padding: 10px 0 40px;
}

.card {
  background: var(--panel);
  border: 1px solid var(--stroke);
  border-radius: 18px;
  box-shadow: var(--shadow2);
}

.big-card {
  position: relative;
  padding: 34px 30px;
  margin: 10px auto 18px;
  max-width: 1120px;
}

.team-card { max-width: 900px !important; margin: 0 auto; }

/* Form Styles */
.form-grid {
  display: grid;
  gap: 20px;
  width: 100%;
  margin: 20px 0 30px;
}

.form-block {
  background: var(--panel2);
  border: 1px solid var(--stroke);
  border-radius: 16px;
  padding: 20px;
}

.form-label {
  display: block;
  font-weight: 900;
  font-size: 16px;
  margin-bottom: 8px;
}

.form-input {
  width: 100%;
  padding: 14px;
  border-radius: 12px;
  border: 1px solid rgba(0, 191, 230, .30);
  background: #fff;
  font-weight: 700;
  font-size: 16px;
  outline: none;
}
.form-input:focus {
  border-color: var(--primary2);
  box-shadow: 0 0 0 4px rgba(43, 108, 255, .10);
}

.form-help {
  margin-top: 10px;
  font-size: 13px;
  color: var(--muted);
  font-weight: 600;
}

/* Members Grid */
.members-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
  gap: 12px;
  margin-top: 10px;
}

.member-tile {
  border: 1px solid var(--stroke);
  background: var(--panel);
  border-radius: 12px;
  padding: 12px;
  min-height: 50px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: space-between;
  box-shadow: 0 2px 5px rgba(0,0,0,0.05);
  color: var(--text);
  font-weight: 600;
  transition: all 0.15s;
}
.member-tile:hover {
  border-color: var(--primary);
  transform: translateY(-2px);
}
.member-tile.selected {
  border-color: var(--primary2);
  background: rgba(43, 108, 255, .08);
  color: var(--primary2);
  font-weight: 700;
}
.member-check {
  font-weight: 900;
  color: var(--primary2);
}

/* Buttons */
.nav-row {
  margin-top: 34px;
  display: flex;
  justify-content: center;
  gap: 20px;
}
.btn-pill {
  border: none;
  border-radius: 999px;
  padding: 16px 48px;
  font-weight: 900;
  letter-spacing: .10em;
  cursor: pointer;
  transition: transform 0.1s;
  background: linear-gradient(90deg, var(--primary), var(--primary2));
  color: #fff;
  box-shadow: 0 10px 22px rgba(43, 108, 255, .18);
  font-size: 16px;
}
.btn-pill:hover { filter: brightness(1.05); }
.btn-pill:active { transform: scale(0.98); }

.btn-rect {
  border: none;
  border-radius: 12px;
  padding: 14px 48px;
  font-weight: 800;
  letter-spacing: .05em;
  cursor: pointer;
  background: var(--panel2);
  color: var(--text);
  border: 1px solid var(--stroke);
  box-shadow: var(--shadow2);
  transition: all 0.2s;
}
.btn-rect:hover { background: #fff; transform: translateY(-1px); }
.btn-rect:disabled { opacity: 0.5; cursor: not-allowed; }


/* =========================================
   5. GAME UI ELEMENTS
   ========================================= */
.hud { display: flex; justify-content: space-between; padding: 26px 40px; margin-top: 10px; }
.hud-box { background: var(--panel); border: 1px solid var(--stroke); color: var(--text); font-weight: 900; letter-spacing: .10em; padding: 14px 30px; min-width: 240px; text-align: center; border-radius: 14px; box-shadow: var(--shadow2); }
.hud-box.time-danger { border-color: var(--danger); color: var(--danger); animation: pulse-red 1s infinite; }
@keyframes pulse-red { 50% { opacity: 0.7; } }

.team-banner { max-width: 1120px; margin: 0 auto 14px; background: var(--panel); border: 1px solid var(--stroke); color: var(--text); font-weight: 900; letter-spacing: .10em; text-transform: uppercase; padding: 16px 22px; border-radius: 14px; box-shadow: var(--shadow2); text-align: center; }

/* Lifelines */
.lifelines { position: absolute; top: 14px; right: 14px; display: flex; gap: 10px; z-index: 10; }
.life-btn { height: 42px; min-width: 42px; padding: 0 12px; border-radius: 999px; border: 1px solid rgba(0, 191, 230, .35); background: rgba(0, 191, 230, .10); color: rgba(0, 95, 125, .95); font-weight: 900; cursor: pointer; }
.life-btn:disabled { cursor: not-allowed; opacity: 0.5; }
.life-btn.used-up { opacity: 0.7; background: rgba(225, 29, 72, 0.1); border-color: rgba(225, 29, 72, 0.3); color: var(--danger); text-decoration: line-through; }

/* Progress Bar */
.progress-container { width: 100%; height: 8px; background: #e2e8f0; position: fixed; top: 0; left: 0; z-index: 100; }
.progress-bar { height: 100%; background: linear-gradient(90deg, var(--primary), var(--primary2)); transition: width 0.5s ease; }

/* Fireworks */
#fireworksCanvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 9999; }

/* Title & Content */
.big-title { margin: 50px 0 20px 0; font-size: 52px; line-height: 1.08; font-weight: 900; letter-spacing: .06em; text-transform: uppercase; text-align: center; white-space: pre-line; }
.question-body { margin-top: 18px; max-width: 920px; margin-left: auto; margin-right: auto; text-align: center; font-weight: 600; line-height: 1.7; color: var(--muted); white-space: pre-line; }

/* Drag & Drop */
.dragdrop { margin-top: 18px; }
.dd-grid { display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; margin: 0 auto 20px; max-width: 980px; }
.dd-slot { flex: 0 0 240px; border: 2px dashed rgba(17, 24, 39, .30); border-radius: 16px; background: var(--panel2); min-height: 280px; padding: 12px; display: flex; flex-direction: column; align-items: center; color: var(--muted); font-weight: 800; text-align: center; }
.dd-slot-img { width: 100%; height: 220px; object-fit: contain; background: #000; border-radius: 8px; margin-bottom: 10px; border: 1px solid var(--stroke); }
.dd-slot-label-area { flex-grow: 1; display: flex; align-items: center; justify-content: center; width: 100%; min-height: 40px; border: 1px solid rgba(0, 191, 230, .2); background: rgba(0, 191, 230, .05); border-radius: 8px; padding: 4px; font-size: 13px; }
.dd-labels { display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; margin-top: 14px; }
.dd-label { border: 1px solid rgba(0, 191, 230, .30); background: rgba(0, 191, 230, .10); color: rgba(0, 95, 125, .95); padding: 10px 14px; border-radius: 999px; font-weight: 900; cursor: grab; }
.dd-label.used { opacity: .35; pointer-events: none; }
.dd-actions { display: flex; justify-content: center; margin-top: 24px; width: 100%; }

/* Password */
.pwd-container { grid-column: 1 / -1; display: flex; flex-direction: column; align-items: center; gap: 20px; width: 100%; }
.pwd-inline-input { width: 100%; max-width: 400px; padding: 16px; font-size: 20px; text-align: center; border-radius: 14px; border: 2px solid rgba(0, 191, 230, .30); background: #fff; color: var(--text); outline: none; font-weight: 800; text-transform: uppercase; }
.pwd-inline-input:focus { border-color: var(--primary2); box-shadow: 0 0 0 4px rgba(43, 108, 255, .15); }
.pdf-link-btn { display: inline-flex; align-items: center; gap: 10px; margin: 20px auto; padding: 16px 32px; background: #ffffff; border: 2px solid var(--primary2); border-radius: 12px; color: var(--primary2); font-weight: 800; text-decoration: none; font-size: 18px; transition: all 0.2s; box-shadow: var(--shadow2); }
.pdf-link-btn:hover { background: var(--primary2); color: white; transform: translateY(-2px); }

/* MCQ Options */
.options-row { display: grid; grid-template-columns: repeat(4, minmax(140px, 1fr)); gap: 28px; max-width: 1120px; margin: 0 auto; }
.options-row.single-col { display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 24px; max-width: 900px; }
.option-btn { background: var(--panel); border: 1px solid var(--stroke); padding: 16px 14px; font-weight: 700; cursor: pointer; border-radius: 14px; color: var(--text); box-shadow: var(--shadow2); white-space: pre-line; transition: all 0.2s; }
.option-btn:hover { filter: brightness(1.02); }
.option-btn.correct { border-color: var(--success) !important; background: var(--success) !important; color: white !important; }
.option-btn.wrong { border-color: var(--danger) !important; background: var(--danger) !important; color: white !important; }
.option-blur { filter: blur(2.5px); opacity: .45; pointer-events: none; }

/* Modals */
.modal { position: fixed; inset: 0; background: rgba(2, 6, 23, .65); display: flex; align-items: center; justify-content: center; padding: 20px; z-index: 50; }
.modal-card { width: min(980px, 94vw); padding: 28px; position: relative; background: #fff; border-radius: 18px; text-align: center; }
.modal-close { position: absolute; top: 14px; right: 14px; width: 42px; height: 42px; border-radius: 999px; border: 1px solid var(--stroke); background: var(--panel2); font-weight: 900; cursor: pointer; }
.modal-title { margin: 0 0 18px; font-size: 46px; font-weight: 900; text-transform: uppercase; }
.ataboy-card .ataboy-big { font-size: 52px; font-weight: 900; color: var(--success); }
.ataboy-card .ataboy-small { margin-top: 8px; font-weight: 800; font-size: 18px; color: var(--muted); }
.hint-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 28px; }
.hint-tile { border: 1px solid var(--stroke); background: var(--panel2); border-radius: 16px; padding: 30px; min-height: 200px; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 10px; cursor: pointer; }
.hint-tile-top { font-size: 44px; font-weight: 900; }
.hint-tile-bottom { font-size: 28px; font-weight: 900; color: var(--primary2); }
.hint-present { border: 1px solid var(--stroke); background: var(--panel2); border-radius: 16px; box-shadow: var(--shadow); padding: 42px 26px; margin: 0 18px; min-height: 240px; display: flex; align-items: center; justify-content: center; }
.hint-present-text { font-size: 28px; font-weight: 900; color: rgba(0, 95, 125, .95); text-align: center; }
.result-card { max-width: 720px; }
.result-title { font-size: 44px; font-weight: 900; text-transform: uppercase; margin-bottom: 10px; }
.result-body { font-weight: 700; color: var(--muted); margin: 10px auto 18px; max-width: 560px; line-height: 1.65; white-space: pre-line; }

/* Info & Textbox */
.info-card-wrap { text-align: left; background: #ffffff; border: 1px solid rgba(43, 108, 255, .2); border-left: 6px solid var(--primary2); border-radius: 12px; padding: 36px 42px; box-shadow: var(--shadow2); font-size: 19px; line-height: 1.8; color: var(--text); white-space: pre-line; }
.opinion-textarea { width: 100%; max-width: 900px; min-height: 180px; padding: 20px; border-radius: 16px; border: 2px solid var(--stroke); background: #fff; font-family: inherit; font-size: 18px; font-weight: 600; color: var(--text); outline: none; resize: vertical; box-shadow: var(--shadow2); }
.opinion-textarea:focus { border-color: var(--primary); box-shadow: 0 0 0 4px rgba(0, 191, 230, 0.15); }

/* Images (General) */
.step-image-container { display: flex; justify-content: center; margin: 20px 0; }
.step-image { max-width: 100%; max-height: 400px; border-radius: 12px; box-shadow: var(--shadow2); border: 1px solid var(--stroke); }

/* Final / Podium */
.final-card { display: flex; flex-direction: column; align-items: center; text-align: center; gap: 10px; padding-bottom: 40px; }
.trophy { font-size: 80px; line-height: 1; margin-top: 6px; }
.final-sub { opacity: .9; margin-bottom: 20px; }
.final-team-section { background: var(--panel2); border: 1px solid var(--stroke); border-radius: 16px; padding: 20px 40px; margin: 10px 0 20px; width: 100%; max-width: 600px; }
.final-team-icon { font-size: 40px; margin-bottom: 5px; }
.final-team-name { color: var(--primary2); font-size: 28px; font-weight: 900; margin: 0 0 10px 0; text-transform: uppercase; }
.final-members-list { font-size: 18px; font-weight: 700; color: var(--muted); }
.final-stats { width: min(560px, 100%); margin-top: 14px; display: flex; flex-direction: column; gap: 10px; }
.final-stat { display: flex; justify-content: space-between; padding: 14px 16px; border-radius: 14px; border: 1px solid rgba(255, 255, 255, .16); background: rgba(255, 255, 255, .06); }
.final-k { letter-spacing: .08em; opacity: .8; font-weight: 800; font-size: 12px; }
.final-v { font-weight: 900; font-size: 18px; }

.podium-container { display: flex; justify-content: center; align-items: flex-end; gap: 15px; margin: 40px auto; min-height: 200px; }
.podium-step { display: flex; flex-direction: column; align-items: center; width: 140px; color: #fff; border-radius: 12px 12px 0 0; padding: 10px; box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15); position: relative; text-align: center; }
.podium-1 { height: 220px; background: linear-gradient(135deg, #fbbf24, #d97706); order: 2; z-index: 2; }
.podium-2 { height: 160px; background: linear-gradient(135deg, #94a3b8, #475569); order: 1; }
.podium-3 { height: 120px; background: linear-gradient(135deg, #b45309, #78350f); order: 3; }
.podium-rank { font-size: 48px; font-weight: 900; opacity: 0.3; margin-bottom: -10px; }
.podium-team { font-weight: 800; font-size: 16px; margin-top: auto; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2); }
.podium-score { font-size: 14px; opacity: 0.9; }

.loading-overlay { position: fixed; inset: 0; background: rgba(238, 243, 255, 0.95); backdrop-filter: blur(5px); z-index: 100; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 20px; }
.loader-text { font-size: 24px; font-weight: 900; color: var(--primary2); letter-spacing: .05em; text-transform: uppercase; animation: pulse 1.5s infinite; }
.loader-spinner { width: 50px; height: 50px; border: 5px solid rgba(0, 191, 230, 0.2); border-top-color: var(--primary2); border-radius: 50%; animation: spin 1s linear infinite; }
@keyframes spin { 100% { transform: rotate(360deg); } }
@keyframes pulse { 50% { opacity: 0.5; } }

@media print {
  .hud, .lifelines, .nav-row, .no-print, .team-banner, .progress-container, #fireworksCanvas { display: none !important; }
  body { background: #fff; color: #000; }
  .card { box-shadow: none; border: 2px solid #000; }
  .big-title { color: #000; margin-top: 0; }
  .final-team-name, .final-members-list { color: #000; }
}